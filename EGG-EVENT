local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Network = ReplicatedStorage:WaitForChild("Network")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local customEggsFolder = workspace:WaitForChild("__THINGS"):WaitForChild("CustomEggs")

-- ğŸ“Œ Táº¯t animation má»Ÿ trá»©ng
local Eggs = player:WaitForChild("PlayerScripts"):WaitForChild("Scripts"):WaitForChild("Game"):WaitForChild("Egg Opening Frontend")
getsenv(Eggs).PlayEggAnimation = function() return end

-- âœ… TÃ¹y chá»‰nh sá»‘ lÆ°á»£ng trá»©ng muá»‘n má»Ÿ má»—i láº§n
local EggAmount = 89 -- Sá»­a thÃ nh 1, 3 hoáº·c 8 tÃ¹y Ã½

-- ğŸ“Œ Lá»c tÃªn mÃ£ hÃ³a
local function isEncodedName(name)
	return #name >= 32 and name:match("^[a-f0-9]+$") ~= nil
end

-- ğŸ“Œ TrÃ­ch sá»‘ tá»« "100x HUGE CHANCE!"
local function extractChanceValue(text)
	local num = text:match("(%d+)x%s+HUGE%s+CHANCE!?")
	return tonumber(num or "0")
end

-- ğŸ“Œ Teleport tá»›i part cá»§a egg
local function teleportToEgg(egg)
	local part = egg:FindFirstChildWhichIsA("BasePart", true)
	if part then
		hrp.CFrame = part.CFrame + Vector3.new(0, 5, 0)
		return true
	end
	return false
end

-- ğŸ” TÃ¬m egg mÃ£ hÃ³a cÃ³ giÃ¡ trá»‹ HUGE CHANCE cao nháº¥t (tele trÆ°á»›c khi Ä‘á»c GUI)
local function findBestHugeChanceEgg()
	local bestEgg = nil
	local bestValue = -1

	for _, egg in ipairs(customEggsFolder:GetChildren()) do
		if isEncodedName(egg.Name) then
			teleportToEgg(egg)
			task.wait(0.3)

			local titleLabel = egg:FindFirstChild("Egg")
				and egg.Egg:FindFirstChild("EggInfo")
				and egg.Egg.EggInfo:FindFirstChild("Frame")
				and egg.Egg.EggInfo.Frame:FindFirstChild("Title")

			if titleLabel and titleLabel:IsA("TextLabel") then
				local content = titleLabel.ContentText
				local value = extractChanceValue(content)
				if value > bestValue then
					bestEgg = egg
					bestValue = value
				end
			end
		end
	end

	return bestEgg
end

-- ğŸ¯ Báº¯t Ä‘áº§u
local bestEgg = findBestHugeChanceEgg()
if not bestEgg then
	warn("âŒ KhÃ´ng tÃ¬m tháº¥y egg nÃ o cÃ³ HUGE CHANCE!")
	return
end

print("ğŸ¯ TÃ¬m tháº¥y egg tá»‘t nháº¥t:", bestEgg.Name)

-- ğŸŒ€ Auto má»Ÿ egg liÃªn tá»¥c
_G.AutoOpen = true

task.spawn(function()
	while _G.AutoOpen and task.wait() do
		local args = {
			[1] = bestEgg.Name,
			[2] = EggAmount
		}

		local success, result = pcall(function()
			return Network.CustomEggs_Hatch:InvokeServer(unpack(args))
		end)

		if not success then
			warn("âš ï¸ Lá»—i khi Hatch:", result)
		end
	end
end)
