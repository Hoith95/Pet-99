local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Network = ReplicatedStorage:WaitForChild("Network")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local customEggsFolder = workspace:WaitForChild("__THINGS"):WaitForChild("CustomEggs")

-- âš™ï¸ Cáº¥u hÃ¬nh
_G.AutoOpen = true
local EggAmount = 50         -- Sá»‘ lÆ°á»£ng má»Ÿ má»—i láº§n
local HatchDelay = 1      -- Delay giá»¯a má»—i láº§n má»Ÿ

-- ğŸ“Œ Táº¯t animation má»Ÿ trá»©ng
local Eggs = player:WaitForChild("PlayerScripts"):WaitForChild("Scripts"):WaitForChild("Game"):WaitForChild("Egg Opening Frontend")
getsenv(Eggs).PlayEggAnimation = function() return end

-- ğŸ“Œ Kiá»ƒm tra tÃªn mÃ£ hÃ³a
local function isEncodedName(name)
	return #name >= 32 and name:match("^[a-f0-9]+$") ~= nil
end

-- ğŸ“Œ TrÃ­ch sá»‘ tá»« "100x HUGE CHANCE!"
local function extractChanceValue(text)
	local num = text:match("(%d+)x%s+HUGE%s+CHANCE!?")
	return tonumber(num or "0")
end

-- ğŸ“Œ Teleport tá»›i egg
local function teleportToEgg(egg)
	local part = egg:FindFirstChildWhichIsA("BasePart", true)
	if part then
		hrp.CFrame = part.CFrame + Vector3.new(0, 5, 0)
		return true
	end
	return false
end

-- ğŸ“Œ TÃ¬m egg mÃ£ hÃ³a cÃ³ HUGE CHANCE cao nháº¥t
local function findBestHugeChanceEgg()
	local bestEgg = nil
	local bestValue = -1

	for _, egg in ipairs(customEggsFolder:GetChildren()) do
		if isEncodedName(egg.Name) then
			teleportToEgg(egg)
			task.wait(0.3)

			local titleLabel = egg:FindFirstChild("Egg")
				and egg.Egg:FindFirstChild("EggInfo")
				and egg.Egg.EggInfo:FindFirstChild("Frame")
				and egg.Egg.EggInfo.Frame:FindFirstChild("Title")

			if titleLabel and titleLabel:IsA("TextLabel") then
				local content = titleLabel.ContentText
				local value = extractChanceValue(content)

				print(string.format("ğŸ” %s: %sx", egg.Name, value))
				if value > bestValue then
					bestEgg = egg
					bestValue = value
				end
			end
		end
	end

	if bestEgg then
		print("ğŸ¯ Egg tá»‘t nháº¥t:", bestEgg.Name, "- HUGE CHANCE:", bestValue.."x")
	end

	return bestEgg
end

-- ğŸ¥‡ TÃ¬m egg tá»‘t nháº¥t trÆ°á»›c khi báº¯t Ä‘áº§u auto open
local bestEgg = findBestHugeChanceEgg()
if not bestEgg then
	warn("âŒ KhÃ´ng tÃ¬m tháº¥y egg nÃ o cÃ³ HUGE CHANCE!")
	return
end

-- ğŸ“Œ Má»Ÿ egg liÃªn tá»¥c
task.spawn(function()
	while _G.AutoOpen do
		local args = {
			[1] = bestEgg.Name,
			[2] = EggAmount
		}
		local success, result = pcall(function()
			return Network.CustomEggs_Hatch:InvokeServer(unpack(args))
		end)
		if not success then
			warn("âš ï¸ Lá»—i khi má»Ÿ egg:", result)
		end
		task.wait(HatchDelay)
	end
end)
