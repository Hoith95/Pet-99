-- Kiá»ƒm tra biáº¿n toÃ n cá»¥c Ä‘á»ƒ xÃ¡c Ä‘á»‹nh script Ä‘Ã£ cháº¡y hay chÆ°a
if _G.VAR_TIME_TRIAL2 then
    warn("Script Ä‘Ã£ Ä‘Æ°á»£c cháº¡y trÆ°á»›c Ä‘Ã³!")
    return -- Dá»«ng script náº¿u Ä‘Ã£ cháº¡y
end

-- ÄÃ¡nh dáº¥u script Ä‘Ã£ Ä‘Æ°á»£c cháº¡y
_G.VAR_TIME_TRIAL2 = true

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Save = require(game.ReplicatedStorage.Library.Client.Save)

local function getTimeTrialRuns()
	local saveData = Save.Get()
	return saveData 
		and saveData.TimeTrialStats 
		and (saveData.TimeTrialStats.Daily_run or 0) 
		or 0
end

local function monitorTimeTrialProgress()
	local currentRuns = getTimeTrialRuns()
	print("ğŸ“Š Sá»‘ lÆ°á»£t Time Trial Ä‘Ã£ hoÃ n thÃ nh: " .. currentRuns)

	if currentRuns >= 10 then
		warn("ğŸ¯ ÄÃ£ Ä‘á»§ 10 lÆ°á»£t, khÃ´ng cáº§n theo dÃµi thÃªm.")
		return
	end

	while currentRuns < 10 do
		local startRuns = currentRuns
		local totalTime = 0

		print("ğŸ•’ Báº¯t Ä‘áº§u theo dÃµi 12 phÃºt tá»« lÆ°á»£t thá»© " .. startRuns)

		-- Theo dÃµi trong tá»‘i Ä‘a 12 phÃºt (686 giÃ¢y)
		while totalTime < 686 do
			task.wait(10)
			totalTime += 10

			currentRuns = getTimeTrialRuns()
			if currentRuns >= 10 then
				warn("ğŸ‰ ÄÃ£ Ä‘áº¡t 10 lÆ°á»£t trong khi theo dÃµi, káº¿t thÃºc script.")
				return
			elseif currentRuns > startRuns then
				print("âœ… ÄÃ£ cÃ³ tiáº¿n triá»ƒn (tÄƒng tá»« " .. startRuns .. " lÃªn " .. currentRuns .. "), tiáº¿p tá»¥c theo dÃµi thÃªm 30 phÃºt.")
				break -- báº¯t Ä‘áº§u láº¡i chu ká»³ 30 phÃºt
			end
		end

		-- Náº¿u sau 30 phÃºt mÃ  sá»‘ lÆ°á»£t váº«n khÃ´ng Ä‘á»•i
		if currentRuns == startRuns then
			player:Kick("â° 12 phÃºt rá»“i mÃ  khÃ´ng tÄƒng lÆ°á»£t Time Trial. Cháº¯c lÃ  AFK hoáº·c lá»—i.")
			return
		end
	end

	warn("ğŸ¯ ÄÃ£ Ä‘á»§ 10 lÆ°á»£t, dá»«ng giÃ¡m sÃ¡t.")
end

monitorTimeTrialProgress()
