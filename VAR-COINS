local RS = game:GetService("ReplicatedStorage")
local Save = require(RS.Library.Client.Save) 

-- H√†m l·∫•y s·ªë l∆∞·ª£ng LuckyCoins
local function getLuckyCoins()
    local Inventory = Save.Get().Inventory
    for _, v in pairs(Inventory.Currency) do 
        if v.id == "LuckyCoins" then
            return v._am
        end
    end
    return 0
end

-- H√†m ch·∫°y script t·ª´ URL trong m·ªôt task ri√™ng
local function runScript(url)
    task.spawn(function()
        local success, err = pcall(function()
            loadstring(game:HttpGet(url))()
        end)
        if success then
            print("‚úÖ ƒê√£ ch·∫°y script t·ª´:", url)
        else
            print("‚ö†Ô∏è L·ªói khi ch·∫°y script:", err)
        end
    end)
end

-- üõ† C√°c URL script
local scriptJoinLow_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/JoinLow"
local serverHop1_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/ServerHop3"
local serverHop2_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/ServerHop-W1"

-- üõ† L·∫•y l∆∞·ª£ng Coins ban ƒë·∫ßu
local initialCoins = getLuckyCoins()
_G.COINS10M = initialCoins >= 10000000
_G.COINS0M = initialCoins < 10000000

print("üöÄ Script b·∫Øt ƒë·∫ßu ch·∫°y! Coins ban ƒë·∫ßu:", initialCoins)
print("üìå G√°n bi·∫øn _G:", _G.COINS10M and "_G.COINS10M = true" or "_G.COINS0M = true")

-- üï∞ ƒê·ª£i 5 ph√∫t tr∆∞·ªõc khi ki·ªÉm tra s·ª± thay ƒë·ªïi
task.wait(300)

-- üîÑ Theo d√µi s·ª± thay ƒë·ªïi c·ªßa Coins
local prevCoins = initialCoins
local lastChangeTime = os.time()

while true do
    task.wait(60) -- Ki·ªÉm tra m·ªói 60 gi√¢y
    local currentCoins = getLuckyCoins()
    print("üîÑ LuckyCoins c·∫≠p nh·∫≠t: Tr∆∞·ªõc =", prevCoins, ", Hi·ªán t·∫°i =", currentCoins)

    -- üõë N·∫øu Coins ƒë√£ tr√™n 50M ngay t·ª´ ƒë·∫ßu, kh√¥ng l√†m g√¨ c·∫£, ch·ªâ theo d√µi
    if initialCoins >= 50000000 then
        print("‚úÖ Coins ban ƒë·∫ßu ƒë√£ tr√™n 50M, ch·ªâ theo d√µi!")
    else
        -- N·∫øu Coins tƒÉng l√™n, ki·ªÉm tra ƒë·∫°t m·ªëc 50M ch∆∞a
        if currentCoins > prevCoins then
            print("üìà Coins ƒëang tƒÉng!")
            if currentCoins >= 50000000 then
                print("üéâ Coins ƒë·∫°t 50M! Th·ª≠ ƒë·ªïi server...")
                runScript(scriptJoinLow_URL)
                task.wait(30)
                if getLuckyCoins() == currentCoins then
                    print("‚ö†Ô∏è Kh√¥ng ƒë·ªïi ƒë∆∞·ª£c server, th·ª≠ ph∆∞∆°ng √°n kh√°c...")
                    runScript(serverHop1_URL)
                    task.wait(10)
                    runScript(serverHop2_URL)
                    task.wait(10)
                    game.Players.LocalPlayer:Kick("Heo")
                end
                break
            end
        end

        -- N·∫øu Coins gi·∫£m xu·ªëng, ki·ªÉm tra ƒë·∫°t m·ªëc 1M ch∆∞a
        if currentCoins < prevCoins then
            print("üìâ Coins ƒëang gi·∫£m!")
            if currentCoins <= 1000000 then
                print("‚ö†Ô∏è Coins gi·∫£m v·ªÅ 1M! Th·ª≠ ƒë·ªïi server...")
                runScript(scriptJoinLow_URL)
                task.wait(30)
                if getLuckyCoins() == currentCoins then
                    print("‚ö†Ô∏è Kh√¥ng ƒë·ªïi ƒë∆∞·ª£c server, th·ª≠ ph∆∞∆°ng √°n kh√°c...")
                    runScript(serverHop1_URL)
                    task.wait(10)
                    runScript(serverHop2_URL)
                    task.wait(10)
                    game.Players.LocalPlayer:Kick("Heo")
                end
                break
            end
        end
    end

    -- N·∫øu Coins kh√¥ng thay ƒë·ªïi trong 5 ph√∫t, ch·∫°y JoinLow v√† ƒë·ª£i 2 ph√∫t r·ªìi kick
    if os.time() - lastChangeTime >= 300 then
        print("‚è≥ Coins kh√¥ng thay ƒë·ªïi trong 5 ph√∫t! Th·ª≠ ƒë·ªïi server...")
        runScript(scriptJoinLow_URL)
        task.wait(30)
        if getLuckyCoins() == currentCoins then
            print("‚ö†Ô∏è Kh√¥ng ƒë·ªïi ƒë∆∞·ª£c server, th·ª≠ ph∆∞∆°ng √°n kh√°c...")
            runScript(serverHop1_URL)
            task.wait(10)
            runScript(serverHop2_URL)
            task.wait(10)
            game.Players.LocalPlayer:Kick("Heo")
        end
        break
    end

    -- C·∫≠p nh·∫≠t tr·∫°ng th√°i
    if currentCoins ~= prevCoins then
        lastChangeTime = os.time()
    end
    prevCoins = currentCoins
end
