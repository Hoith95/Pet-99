local RS = game:GetService("ReplicatedStorage")
local Save = require(RS.Library.Client.Save)

-- HÃ m láº¥y sá»‘ lÆ°á»£ng LuckyCoins
local function getLuckyCoins()
    local Inventory = Save.Get().Inventory
    for _, v in pairs(Inventory.Currency) do 
        if v.id == "LuckyCoins" then
            return v._am
        end
    end
    return 0
end

-- HÃ m cháº¡y script tá»« URL trong má»™t task riÃªng
local function runScript(url)
    task.spawn(function()
        local success, err = pcall(function()
            loadstring(game:HttpGet(url))()
        end)
        if success then
            print("âœ… ÄÃ£ cháº¡y script tá»«:", url)
        else
            print("âš ï¸ Lá»—i khi cháº¡y script:", err)
        end
    end)
end

-- URL cá»§a cÃ¡c script
local scriptJoinLow_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/JoinLow"
local scriptHop1_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/ServerHop3"
local scriptHop2_URL = "https://raw.githubusercontent.com/Hoith95/Pet-99/main/ServerHop-W1"

-- ğŸ›  Láº¥y lÆ°á»£ng Coins ban Ä‘áº§u
local initialCoins = getLuckyCoins()
_G.COINS10M = initialCoins >= 10000000
_G.COINS0M = initialCoins < 10000000

print("ğŸš€ Script báº¯t Ä‘áº§u cháº¡y! Coins ban Ä‘áº§u:", initialCoins)
print("ğŸ“Œ GÃ¡n biáº¿n _G:", _G.COINS10M and "_G.COINS10M = true" or "_G.COINS0M = true")

-- ğŸ•° Äá»£i 5 phÃºt trÆ°á»›c khi kiá»ƒm tra sá»± thay Ä‘á»•i
task.wait(300)

-- ğŸ”„ Theo dÃµi sá»± thay Ä‘á»•i cá»§a Coins
local prevCoins = initialCoins
local lastChangeTime = os.time()

-- HÃ m xá»­ lÃ½ khi cáº§n Ä‘á»•i server
local function changeServer()
    runScript(scriptJoinLow_URL)
    task.wait(30)

    -- Náº¿u váº«n chÆ°a Ä‘á»•i server, thá»­ phÆ°Æ¡ng Ã¡n 2
    if getLuckyCoins() == prevCoins then
        print("âš ï¸ JoinLow tháº¥t báº¡i! Thá»­ phÆ°Æ¡ng Ã¡n 2...")
        runScript(scriptHop1_URL)
        task.wait(10)
    end

    -- Náº¿u phÆ°Æ¡ng Ã¡n 2 cÅ©ng tháº¥t báº¡i, thá»­ phÆ°Æ¡ng Ã¡n 3
    if getLuckyCoins() == prevCoins then
        print("âš ï¸ PhÆ°Æ¡ng Ã¡n 2 tháº¥t báº¡i! Thá»­ phÆ°Æ¡ng Ã¡n 3...")
        runScript(scriptHop2_URL)
        task.wait(10)
    end

    -- Náº¿u cáº£ 3 phÆ°Æ¡ng Ã¡n Ä‘á»u tháº¥t báº¡i, kick ngÆ°á»i chÆ¡i
    if getLuckyCoins() == prevCoins then
        print("ğŸš¨ KhÃ´ng cÃ³ thay Ä‘á»•i! Kick ngÆ°á»i chÆ¡i...")
        game.Players.LocalPlayer:Kick("Heo")
    end
end

while true do
    task.wait(60) -- Kiá»ƒm tra má»—i 60 giÃ¢y
    local currentCoins = getLuckyCoins()
    print("ğŸ”„ LuckyCoins cáº­p nháº­t: TrÆ°á»›c =", prevCoins, ", Hiá»‡n táº¡i =", currentCoins)

    -- Náº¿u Coins thay Ä‘á»•i (tÄƒng hoáº·c giáº£m)
    if currentCoins ~= prevCoins then
        lastChangeTime = os.time() -- Reset thá»i gian khÃ´ng thay Ä‘á»•i

        if currentCoins >= 50000000 then
            print("ğŸ‰ Coins Ä‘áº¡t 50M! Tiáº¿n hÃ nh Ä‘á»•i server...")
            changeServer()
            break
        elseif currentCoins <= 1000000 then
            print("âš ï¸ Coins giáº£m vá» 1M! Tiáº¿n hÃ nh Ä‘á»•i server...")
            changeServer()
            break
        end
    end

    -- Náº¿u Coins khÃ´ng thay Ä‘á»•i trong 5 phÃºt, cháº¡y JoinLow
    if os.time() - lastChangeTime >= 300 then
        print("â³ Coins khÃ´ng thay Ä‘á»•i trong 5 phÃºt! Tiáº¿n hÃ nh Ä‘á»•i server...")
        changeServer()
        break
    end

    prevCoins = currentCoins
end
